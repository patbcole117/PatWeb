
Gyokuro LLC                                                      Patrick Coleman
                                                                 2021/07/20

Title: My Website Project Outline
Author: Patrick Coleman
Date: July 20th, 2021

Introduction
     When deciding on how this website would look, I knew I would have to
     keep it simple; because I am not a skilled web-dev. In addition I wanted it
     to be memorable and adhere to my tastes; after all, this is MY personal 
     website.

     I've always been a fan of punk/post-punk/avant-garde aesthetics. I have a few 
     skateboards; a few pairs of custom Vans shoes; my Spotify has a lot of punk
     music; and if I find myself in front of a TV at night, the first channel 
     ill look for is Adult Swim. 

     In a world of web-developers all one-upping each other to make the most 
     spectacular, responsive, flashy website possible. I choose to play to my 
     strengths and go the complete opposite route.
      
Infrastructure/Network
     This website is completely self hosted on my own web server. The only expense
     is the domain name and the electricity. The Ubuntu VM that hosts my server 
     runs behind a virtual pfSense router (neptune) provisioned on my Dell 
     Poweredge R720. This means all traffic to my server must be double NATed.
     
     
     Below is a logical diagram of my web hosting setup:
     

Host Configuration
     On the Ubuntu server is a docker-compose.yaml file to spool up two containers
     on their own docker-network. 
     
          NGINX
               NGINX acts as a reverse proxy to decouple SSL/TLS management from
               my python application. It also allows me to potentially add multiple
               servers behind one port if I later choose to do so.
               
          patweb
               patweb is the name of my website project. It uses Python's Flask 
               framework and Gunicorn to serve my website. 
               
     In addition there is a stand alone docker container for certbot to generate
     SSL/TLS certificates.
     
     There is also a script to quickly update my server. The script does x 
     things:
     
     1. Deletes the old patweb files.
     2. Clones the git repo for patweb.
     3. Remakes the docker image.
     4. Restarts the web server container.
     
     This allows me to make changes to the website and deploy them in seconds.
     Containers are truly amazing!

Efficiency
     During the creation of this website, I tried to use as few lines of code as
     possible. If there are blocks in different HTML files that need the same 
     styling, they import the same CSS; If something is repeated, loops are used
     to generate the HTML.

     For example the "projects" page is actually very lean. See below:

     ...
       {% for p in project_list %}
       <div class="project">
           <div class="project-title">{{p['title']}}</div>
           <div class="project-infobox">
               <div class="project-links">
                   {% for l in p['links'] %}
                       <a href="{{l['url']}}">{{l['title']}}</a>
                   {% endfor %}
               </div>
               <div class="project-desc">
                   <div>{{p['desc']}}</div>
               </div>
           </div>
       </div>
       {% endfor %}
     ...

     As a result of the above code, I will never have to write HTML to add 
     projects to the project page. Instead I create a json object for a project
     and jinja will create the HTML necessary to place the project onto the 
     page. 
     
     I have defined a "Project" in json to look like this:
     
          {
          'title': 'PROJECT TITLE', 
          'links': [{'url': 'LINK_1 URL', 'title': 'LINK_1 TITLE'}],
          'desc': 'PROJECT DESCRIPTION'
          }
          
     
     And the pythonic code to generate one looks like this:
     
          # Initialize a project object                                                      
          project_patweb = {'title': 'Patweb', 'links': [], 'desc': ''}
          
          # Insert links
          project_patweb['links'].append({'url': '/pos/patweb', 'title': 'project \
               outline'})
          project_patweb['links'].append({'url': 'https://github.com/patbcole117/PatWeb' \
               , 'title': 'github'})
          
          # Project descriptions are kept in a txt file and read into the json.
          f = open('app/templates/txt/descpatweb.txt', 'r')
          project_patweb['desc'] = f.read()
          
          #Lastly, the project is appended to a list and passed to jinja to 
          # generate HTML.
          project_list.append(project_patweb)
          
     This design allows me to only write in python, all the CSS and HTML are
     done automatically. Simply append a new project.json to the project list
     and jinja takes care of the rest.
     
Future Development
     I plan on adding some eastereggs to my website. There might already be some
     hidden around...
     
